# ============================================================================
# Hyprlock Configuration (Fixed Contrast)
# ============================================================================
source = $HOME/.config/hypr/hyprlock-colors.conf

# ----------------------------------------------------------------------------
# Background
# ----------------------------------------------------------------------------
background {
    monitor =
    path = /home/lucas/current_wallpaper/background.jpg
    color = $background
    blur_passes = 3
    contrast = 0.8916
    brightness = 0.8172
    vibrancy = 0.1696
    vibrancy_darkness = 0.0
}

# ----------------------------------------------------------------------------
# Dimming Overlay
# ----------------------------------------------------------------------------
shape {
    monitor =
    size = 4000, 4000
    color = rgba(0, 0, 0, 0.4)
    rounding = 0
    border_size = 0
    position = 0, 0
    halign = center
    valign = center
    zindex = 0
}

# ----------------------------------------------------------------------------
# General Settings
# ----------------------------------------------------------------------------
general {
    ignore_empty_input = true
    hide_cursor = false
}

# ----------------------------------------------------------------------------
# Animations
# ----------------------------------------------------------------------------
animations {
    enabled = true
    bezier = linear, 1, 1, 0, 0
    animation = fadeIn, 1, 5, linear
    animation = fadeOut, 1, 5, linear
    animation = inputFieldDots, 1, 2, linear
}

# ----------------------------------------------------------------------------
# Password Input Field
# ----------------------------------------------------------------------------
input-field {
    monitor =
    size = 250, 55
    outline_thickness = 2
    dots_size = 0.2
    dots_spacing = 0.2
    dots_center = true
    
    outer_color = $primary
    inner_color = $entry_background_color
    font_color = $text_color
    check_color = $primary
    fail_color = rgb(204, 36, 29)

    fade_on_empty = false
    font_family = JetBrainsMono Nerd Font Mono Italic
    placeholder_text = <i>enter password</i>
    hide_input = false
    position = 0, -153
    halign = center
    valign = center
    zindex = 1
}

# ----------------------------------------------------------------------------
# Clock & Date
# ----------------------------------------------------------------------------
label {
    monitor =
    text = $TIME
    color = $primary
    font_size = 100
    font_family = JetBrainsMono Nerd Font Mono Bold
    position = 0, 260
    halign = center
    valign = center
    zindex = 1
}

label {
    monitor =
    text = cmd[update:1000] echo -e "$(date +"%A, %d %B")"
    color = $primary
    font_size = 30
    font_family = JetBrainsMono Nerd Font Mono Bold
    position = 0, 150
    halign = center
    valign = center
    zindex = 1
}

label {
    monitor =
    text = <span> </span>
    color = $primary
    font_size = 24
    font_family = JetBrainsMono Nerd Font Mono Bold
    position = 2, -110
    halign = center
    valign = top
    zindex = 1
}

# ----------------------------------------------------------------------------
# User Profile
# ----------------------------------------------------------------------------
image {
    monitor =
    path = $HOME/Pictures/user.jpg
    border_color = $primary
    border_size = 3
    size = 160
    rounding = -1
    rotate = 0
    reload_time = -1
    position = 0, 15
    halign = center
    valign = center
    zindex = 1
}

label {
    monitor =
    text = hi, $USER
    color = $text_color
    font_size = 14
    font_family = JetBrainsMono Nerd Font Mono Bold Italic
    position = 0, -100
    halign = center
    valign = center
    zindex = 1
}

label {
    monitor =
    text = $LAYOUT[us,ua,ru]
    font_size = 14
    color = $text_color
    font_family = JetBrainsMono Nerd Font Mono Bold
    onclick = hyprctl switchxkblayout all next
    position = 0, -206
    halign = center
    valign = center
    zindex = 1
}

# ============================================================================
# Music Player Widget
# ============================================================================

# Album Art
image {
    monitor =
    path = $HOME/.config/hypr/scripts/music.webp
    size = 100
    rounding = 5
    border_size = 0
    border_color = $primary
    rotate = 0
    reload_time = 2
    reload_cmd = ~/.config/hypr/scripts/hyprlock-music.sh --art
    position = 730, 57
    halign = left
    valign = bottom
    zindex = 2
}

# Player Background Box
shape {
    monitor =
    color = $entry_background_color
    size = 500, 140
    rounding = 10
    border_size = 2
    border_color = $primary
    position = 0, 40
    halign = center
    valign = bottom
    zindex = 1
}

# Track Info
label {
    monitor =
    text = cmd[update:1000] echo "$(~/.config/hypr/scripts/hyprlock-music.sh --title)"
    color = $text_color
    font_size = 14
    font_family = JetBrainsMono Nerd Font Mono Heavy
    position = 55, 138
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor =
    text = cmd[update:1000] echo "$(~/.config/hypr/scripts/hyprlock-music.sh --player)"
    color = $text_color
    font_size = 13
    font_family = JetBrainsMono Nerd Font Mono Bold
    position = 190, 45
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor =
    text = cmd[update:1000] echo "󰠃  $(~/.config/hypr/scripts/hyprlock-music.sh --artist)"
    color = $text_color
    font_size = 12
    font_family = JetBrainsMono Nerd Font Mono Semibold
    position = 55, 118
    halign = center
    valign = bottom
    zindex = 2
}

# Controls
label {
    monitor =
    text = 󰒮
    color = $text_color
    font_size = 25
    onclick = playerctl previous
    position = -5, 55
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor =
    text = cmd[update:1000] ~/.config/hypr/scripts/hyprlock-music.sh --status
    color = $text_color
    font_size = 25
    onclick = playerctl play-pause
    position = 55, 55
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor =
    text = 󰒭
    color = $text_color
    font_size = 25
    onclick = playerctl next
    position = 110, 55
    halign = center
    valign = bottom
    zindex = 2
}

# Progress
label {
    monitor = 
    text = cmd[update:1000] echo "$(~/.config/hypr/scripts/hyprlock-music.sh --position)"
    color = $text_color
    font_size = 10
    font_family = JetBrainsMono Nerd Font Mono
    position = -100, 95
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor = 
    text = cmd[update:1000] echo "$(~/.config/hypr/scripts/hyprlock-music.sh --length)"
    color = $text_color
    font_size = 10
    font_family = JetBrainsMono Nerd Font Mono
    position = 210, 95
    halign = center
    valign = bottom
    zindex = 2
}

label {
    monitor = 
    text = cmd[update:1000] ~/.config/hypr/scripts/hyprlock-music.sh --progress-bar
    color = $primary
    font_size = 12
    font_family = JetBrainsMono Nerd Font Mono
    position = 55, 95
    halign = center
    valign = bottom
    zindex = 2
}
